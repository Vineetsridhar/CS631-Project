CREATE TABLE  ADMIN (
  USERID varchar(30) NOT NULL,
  PASSWORD varchar(30) NOT NULL,
  NAME varchar(30) NOT NULL
) ;


INSERT INTO ADMIN (USERID, PASSWORD, NAME) VALUES
('calin', '123', 'Calin'),
('samir', '123', 'Samir'),
('vin', '123', 'Vineet');



CREATE TABLE  AUTHOR (
  AUTHORID int(11) NOT NULL,
  ANAME varchar(30) NOT NULL
) ;

INSERT INTO AUTHOR (AUTHORID, ANAME) VALUES
(1, 'Veronica Roth'),
(2, 'Margaret Wise Brown'),
(3, 'Rob Scotton'),
(4, 'Paulo Coelho'),
(5, 'Emily Lloyd-Jones'),
(6, 'Woody Allen'),
(7, 'Jennifer E. Smith'),
(8, 'Kendall Kulper'),
(9, 'Natasha Ngan'),
(10, 'Sarah Kozloff'),
(11, 'Stephanie Garber'),
(12, 'Leigh Bardugo');



CREATE TABLE  BOOK (
  DOCID int(11) NOT NULL,
  ISBN varchar(20) NOT NULL
) ;

INSERT INTO BOOK (DOCID, ISBN) VALUES
(1, '62024035'),
(2, '64430170'),
(3, '0007284542'),
(4, '9780061122415'),
(5, '0000000000000'),
(6, '111111111111111'),
(7, '22222222222222'),
(8, '3333333333333'),
(9, '444444444444'),
(10, '55555555555555'),
(11, '6666666666666'),
(12, '7777777777777');


CREATE TABLE  BORROWS (
BORNUM int(11) NOT NULL,
  READERID int(11) NOT NULL,
  DOCID int(11) NOT NULL,
  COPYNO int(11) NOT NULL,
  LIBID int(11) NOT NULL,
  BDTIME datetime NOT NULL,
  RDTIME datetime DEFAULT NULL
) ;


INSERT INTO BORROWS (BORNUM, READERID, DOCID, COPYNO, LIBID, BDTIME, RDTIME) VALUES
(1, 1, 1, 4, 1, '2020-04-22 20:44:50', '2021-04-23 18:33:05'),
(2, 1, 2, 23, 1, '2020-04-23 18:32:58', '2020-04-23 18:33:10'),
(3, 1, 1, 4, 1, '2020-04-23 18:33:46', '2020-04-27 15:42:13'),
(4, 1, 9, 43, 1, '2020-04-27 15:40:08', '2020-04-27 15:42:17'),
(5, 1, 6, 84, 2, '2020-04-27 15:41:08', '2020-04-27 15:42:21'),
(6, 1, 11, 7, 1, '2020-04-27 15:41:14', '2020-04-27 15:42:24'),
(7, 1, 5, 8, 3, '2020-04-27 15:41:35', '2020-04-27 15:42:09'),
(8, 1, 4, 56, 3, '2020-04-27 15:41:46', '2020-04-27 15:42:28'),
(9, 1, 1, 4, 1, '2020-04-27 15:43:39', '2020-04-27 15:44:29'),
(10, 1, 1, 10, 1, '2020-04-27 15:43:51', '2020-04-27 15:44:39'),



CREATE TABLE  BRANCH (
  LIBID int(11) NOT NULL,
  LNAME varchar(50) NOT NULL,
  LLOCATION varchar(50) NOT NULL
) ;


INSERT INTO BRANCH (LIBID, LNAME, LLOCATION) VALUES
(1, 'Newark Library', 'Newark'),
(2, 'New York Library', 'Manhattan'),
(3, 'Secaucus Library', 'Secaucus');




CREATE TABLE  CHIEF_EDITOR (
  EDITOR_ID int(11) NOT NULL,
  ENAME varchar(30) NOT NULL
) ;


INSERT INTO CHIEF_EDITOR (EDITOR_ID, ENAME) VALUES
(741852963, 'James Smith'),
(789789978, 'Charles Smith');



CREATE TABLE  COPY (
  DOCID int(11) NOT NULL,
  COPYNO int(11) NOT NULL,
  LIBID int(11) NOT NULL,
  POSITION int(11) NOT NULL
) ;



INSERT INTO COPY (DOCID, COPYNO, LIBID, POSITION) VALUES
(1, 3, 3, 14),
(1, 4, 1, 43),
(1, 10, 1, 15),
(1, 23, 2, 241),
(1, 63, 1, 5),
(1, 132, 1, 142),
(2, 2, 2, 777),
(2, 3, 3, 3),
(2, 12, 3, 32),
(2, 23, 1, 35),
(3, 4, 2, 65),
(3, 34, 3, 23),
(3, 43, 2, 432),




CREATE TABLE  DOCUMENT (
  DOCID int(11) NOT NULL,
  TITLE varchar(50) NOT NULL,
  PDATE date NOT NULL,
  PUBLISHERID int(11) DEFAULT NULL
) ;



INSERT INTO DOCUMENT (DOCID, TITLE, PDATE, PUBLISHERID) VALUES
(1, 'Divergent', '2020-04-15', 2),
(2, 'Goodnight Moon', '2020-03-18', 2),
(3, 'Splat the Cat', '2018-01-15', 2),
(4, 'The Alchemist', '2010-03-18', 2),
(5, 'Illusive', '2019-12-16', 1),
(6, 'Apropos of Nothing', '2019-12-29', 1),
(7, 'This is What Happy Looks Like', '2019-04-23', 1),
(8, 'Salt & Storm', '2016-04-23', 1),
(9, 'Girls of Paper and Fire', '2016-03-23', 1),
(10, 'The Cerulean Queen', '2020-01-21', 3),
(11, 'Caraval', '2019-12-17', 3),
(12, 'Six of Crows', '2019-12-17', 3),
(13, 'Harry Potter', '2020-04-30', 1),
(14, 'Cirque Du Freak', '2020-04-30', 2);



CREATE TABLE  INV_EDITOR (
  DOCID int(11) NOT NULL,
  ISSUE_NO int(11) NOT NULL,
  IENAME varchar(30) NOT NULL
) ;


INSERT INTO INV_EDITOR (DOCID, ISSUE_NO, IENAME) VALUES
(13, 423423, 'Tom Gates'),
(14, 456456, 'Sam Gates');



CREATE TABLE  JOURNAL_ISSUE (
  DOCID int(11) NOT NULL,
  ISSUE_NO int(11) NOT NULL,
  SCOPE int(11) NOT NULL
) ;


INSERT INTO JOURNAL_ISSUE (DOCID, ISSUE_NO, SCOPE) VALUES
(13, 456456, 5),
(14, 423423, 6);


CREATE TABLE  JOURNAL_VOLUME (
  DOCID int(11) NOT NULL,
  JVOLUME int(11) NOT NULL,
  EDITOR_ID int(11) NOT NULL
) ;

INSERT INTO JOURNAL_VOLUME (DOCID, JVOLUME, EDITOR_ID) VALUES
(13, 3, 741852963),
(14, 4, 789789978);



CREATE TABLE  PUBLISHER (
  PUBLISHERID int(11) NOT NULL,
  PUBNAME varchar(50) NOT NULL,
  ADDRESS varchar(50) NOT NULL
) ;



INSERT INTO PUBLISHER (PUBLISHERID, PUBNAME, ADDRESS) VALUES
(1, 'Hachette', 'California'),
(2, 'HarperCollins', 'Washington'),
(3, 'Macmillan', 'Oregon'),
(4, 'PenguinRandomHouse', 'Arizona'),
(5, 'Simon&Schuster', 'New Jersey');


CREATE TABLE  READER (
READERID int(11) NOT NULL,
  RTYPE varchar(30) NOT NULL,
  RNAME varchar(40) NOT NULL,
  ADDRESS varchar(50) DEFAULT NULL,
  CARDNUM varchar(10) NOT NULL
) ;


INSERT INTO READER (READERID, RTYPE, RNAME, ADDRESS, CARDNUM) VALUES
(1, 'Student', 'Vineet Sridhar', 'Woodbridge', '123456789'),
(2, 'Student', 'Samir Peshori', 'Oldbridge', '987654321'),
(3, 'Student', 'Calin Blauth', 'Pennsylvania', '000000000'),
(4, 'Senior Citizen', 'Chris Evans', 'Washington D.C.', '654321987'),
(5, 'Student', 'Tom Holland', 'New York', '789456123'),
(6, 'Staff', 'Chris Hemsworth', 'Asgard', '741852296'),
(7, 'Senior Citizen', 'Chris Pratt', 'New York', '753951753'),
(8, 'Student', 'Chadwick Boseman', 'Wakanda', '159159159'),
(9, 'Staff', 'Sebastian Stan', 'New York', '753753753'),
(10, 'Senior Citizen', 'Samuel Jackson', 'New York', '789528637'),
(11, 'Student', 'Bradley Cooper', 'Newark', '741852357'),
(12, 'Staff', 'Vin Diesel', 'Trenton', '159368752'),
(13, 'Staff', 'Tom Hiddleston', 'Asgard', '789456789'),
(14, 'Senior Citizen', 'Josh Brolin', 'Flint', '752418963'),
(15, 'Student', 'Anthony Mackie', 'Washington D.C.', '745652874'),
(16, 'Student', 'John Smith', 'Newark', '123432345');




CREATE TABLE  RESERVES (
RESNUMBER int(11) NOT NULL,
  READERID int(11) NOT NULL,
  DOCID int(11) NOT NULL,
  COPYNO int(11) NOT NULL,
  LIBID int(11) NOT NULL,
  DTIME datetime NOT NULL
) ;



CREATE TABLE  WRITES (
  AUTHORID int(11) NOT NULL,
  DOCID int(11) NOT NULL
) ;



INSERT INTO WRITES (AUTHORID, DOCID) VALUES
(1, 1),
(2, 2),
(3, 3),
(4, 4),
(5, 5),
(6, 6),
(7, 7),
(8, 8),
(9, 9)



ALTER TABLE ADMIN
 ADD PRIMARY KEY (USERID);


ALTER TABLE AUTHOR
 ADD PRIMARY KEY (AUTHORID);




ALTER TABLE BOOK
 ADD PRIMARY KEY (DOCID);




ALTER TABLE BORROWS
 ADD PRIMARY KEY (BORNUM), ADD KEY READERID (READERID,DOCID,COPYNO,LIBID), ADD KEY DOCID (DOCID), ADD KEY COPYNO (COPYNO), ADD KEY LIBID (LIBID);




ALTER TABLE BRANCH
 ADD PRIMARY KEY (LIBID);




ALTER TABLE CATALOG
 ADD PRIMARY KEY (PID,SID);




ALTER TABLE CHIEF_EDITOR
 ADD PRIMARY KEY (EDITOR_ID);




ALTER TABLE COPY
 ADD PRIMARY KEY (DOCID,COPYNO,LIBID), ADD KEY COPYLIB (LIBID), ADD KEY COPYNO (COPYNO);




ALTER TABLE DOCUMENT
 ADD PRIMARY KEY (DOCID), ADD KEY PUBLISHERID (PUBLISHERID);




ALTER TABLE INV_EDITOR
 ADD PRIMARY KEY (DOCID,ISSUE_NO,IENAME), ADD KEY INVISSUE (ISSUE_NO);




ALTER TABLE JOURNAL_ISSUE
 ADD PRIMARY KEY (DOCID,ISSUE_NO), ADD KEY ISSUE_NO (ISSUE_NO);




ALTER TABLE JOURNAL_VOLUME
 ADD PRIMARY KEY (DOCID), ADD KEY EDITOR_ID (EDITOR_ID), ADD KEY EDITOR_ID_2 (EDITOR_ID);




ALTER TABLE PARTS
 ADD PRIMARY KEY (PID);




ALTER TABLE PUBLISHER
 ADD PRIMARY KEY (PUBLISHERID);




ALTER TABLE READER
 ADD PRIMARY KEY (READERID);




ALTER TABLE RESERVES
 ADD PRIMARY KEY (RESNUMBER), ADD KEY READERID (READERID,DOCID,COPYNO,LIBID), ADD KEY READERID_2 (READERID), ADD KEY DOCID (DOCID), ADD KEY COPYNO (COPYNO), ADD KEY LIBID (LIBID);




ALTER TABLE SUPPLIERS
 ADD PRIMARY KEY (SID);




ALTER TABLE WRITES
 ADD PRIMARY KEY (AUTHORID,DOCID), ADD KEY BOOKDOC (DOCID);

ALTER TABLE BORROWS
MODIFY BORNUM int(11) NOT NULL AUTO_INCREMENT,AUTO_INCREMENT=131;

ALTER TABLE READER
MODIFY READERID int(11) NOT NULL AUTO_INCREMENT,AUTO_INCREMENT=17;

ALTER TABLE RESERVES
MODIFY RESNUMBER int(11) NOT NULL AUTO_INCREMENT,AUTO_INCREMENT=6;

ALTER TABLE BOOK
ADD CONSTRAINT DOCBOOK FOREIGN KEY (DOCID) REFERENCES DOCUMENT (DOCID) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE BORROWS
ADD CONSTRAINT BOR FOREIGN KEY (COPYNO) REFERENCES COPY (COPYNO) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT BORCOPY FOREIGN KEY (DOCID) REFERENCES COPY (DOCID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT BORLIB FOREIGN KEY (LIBID) REFERENCES COPY (LIBID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT BORREAD FOREIGN KEY (READERID) REFERENCES READER (READERID) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE COPY
ADD CONSTRAINT COPYLIB FOREIGN KEY (LIBID) REFERENCES BRANCH (LIBID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT DOCCOPY FOREIGN KEY (DOCID) REFERENCES DOCUMENT (DOCID) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER TABLE DOCUMENT
ADD CONSTRAINT DOCUMENT_ibfk_1 FOREIGN KEY (PUBLISHERID) REFERENCES PUBLISHER (PUBLISHERID) ON DELETE SET NULL ON UPDATE CASCADE;

ALTER TABLE INV_EDITOR
ADD CONSTRAINT INVDOC FOREIGN KEY (DOCID) REFERENCES JOURNAL_VOLUME (DOCID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT INVDOCU FOREIGN KEY (DOCID) REFERENCES JOURNAL_ISSUE (DOCID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT INVISSUE FOREIGN KEY (ISSUE_NO) REFERENCES JOURNAL_ISSUE (ISSUE_NO) ON DELETE CASCADE ON UPDATE CASCADE;


ALTER TABLE JOURNAL_ISSUE
ADD CONSTRAINT JOURNVOL FOREIGN KEY (DOCID) REFERENCES JOURNAL_VOLUME (DOCID) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE JOURNAL_VOLUME
ADD CONSTRAINT EDIT FOREIGN KEY (EDITOR_ID) REFERENCES CHIEF_EDITOR (EDITOR_ID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT JOURN FOREIGN KEY (DOCID) REFERENCES DOCUMENT (DOCID) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE RESERVES
ADD CONSTRAINT COPYRES FOREIGN KEY (COPYNO) REFERENCES COPY (COPYNO) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT DOCRES FOREIGN KEY (DOCID) REFERENCES COPY (DOCID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT LIBRES FOREIGN KEY (LIBID) REFERENCES COPY (LIBID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT RESREAD FOREIGN KEY (READERID) REFERENCES READER (READERID) ON DELETE CASCADE ON UPDATE CASCADE;

ALTER TABLE WRITES
ADD CONSTRAINT AUTHORBOOK FOREIGN KEY (AUTHORID) REFERENCES AUTHOR (AUTHORID) ON DELETE CASCADE ON UPDATE CASCADE,
ADD CONSTRAINT BOOKDOC FOREIGN KEY (DOCID) REFERENCES DOCUMENT (DOCID) ON DELETE CASCADE ON UPDATE CASCADE;
